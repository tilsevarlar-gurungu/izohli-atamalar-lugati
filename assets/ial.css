:root,
.light {
    --bg-color: #ffffff;
    --link-color: #4183c4;
    --tooltip-bg: #1a1a1a;
    --tooltip-text: #fdfdfd;
    --abbr-underline: rgba(65, 131, 196, 0.25);
}

.rust {
    --bg-color: #f0e7d5;
    --link-color: #2b6ab0;
    --tooltip-bg: #392d2d;
    --tooltip-text: #f0e7d5;
    /* Subtler brown-blue underline */
    --abbr-underline: rgba(43, 106, 176, 0.2);
}

.coal {
    --bg-color: #1a1a1a;
    --link-color: #7092be;
    --tooltip-bg: #f4f1ea;
    --tooltip-text: #1a1a1a;
    --abbr-underline: rgba(245, 245, 245, 0.15);
}

.navy {
    --bg-color: #0d1b2a;
    --link-color: #8da9c4;
    --tooltip-bg: #e2e8f0;
    --tooltip-text: #0d1b2a;
    --abbr-underline: rgba(156, 198, 255, 0.15);
}

.ayu {
    --bg-color: #0f1419;
    --link-color: #73b8d9;
    --tooltip-bg: #f0eee4;
    --tooltip-text: #0f1419;
    --abbr-underline: rgba(115, 208, 255, 0.15);
}

html,
body {
    max-width: 100%;
    overflow-x: hidden;
    position: relative;
}

body {
    background-color: var(--bg-color);
    font-family: "Arial", "Verdana", sans-serif;
    font-size: 1.25rem;
    transition: background-color 0.3s ease, color 0.3s ease;
}

a {
    color: var(--link-color);
    text-decoration: none;
    transition: color 0.2s ease;
}

a:hover {
    filter: brightness(80%);
}


html {
    font-size: 100% !important;
}

.content p {
    line-height: 1.6;
}

/*** affix (for hiding terms/ links) styles *********************/

/* Target sidebar items that are 'affix' (manually injected by preprocessor) 
   and contain a link to our terms directory.
*/
.sidebar-scrollbox li.chapter-item.affix:has(a[href*="terms/"]) {
    display: none !important;
}

/* Fallback for older browsers that don't support :has() 
   This hides the link text itself.
*/
li.affix a[href*="terms/"] {
    display: none !important;
}

/*** abbr styles ************************************************/
abbr[data-en-ru] {
    position: relative;
    text-decoration: none;
    cursor: help;
    border-bottom: 1.5px solid var(--abbr-underline);
}

.tooltip-box {
    position: absolute;
    bottom: 135%;

    /* 1. RESET POSITIONING */
    /* We start at 0 and let JS calculate the exact 'left' pixel value. */
    left: auto;
    right: 0;
    margin-left: 0;

    /* 2. ANIMATION ONLY HANDLES VERTICAL MOVEMENT */
    /* Start 10px lower */
    transform: translateY(10px);

    /* 3. SIZE SAFETY */
    /* This prevents "clipping from both sides" on small screens */
    width: max-content;
    max-width: min(250px);
    white-space: normal;
    /* Allow text to wrap if it hits the max-width */
    text-align: center;

    /* Aesthetics */
    background-color: var(--tooltip-bg);
    color: var(--tooltip-text);
    padding: 8px 14px;
    border-radius: 4px;
    font-size: 0.9rem;
    font-family: sans-serif;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);

    /* Visibility */
    opacity: 0;
    visibility: hidden;

    /* Animate Opacity and the Vertical Rise */
    transition:
        opacity 0.2s ease-out,
        transform 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);

    z-index: 1000;
    pointer-events: none;

    @media (max-width: 600px) {
        max-width: 80vw;
        /* Ensure it never exceeds screen width */
        white-space: normal;
        /* Force text wrapping */
    }
}

/* FINAL STATE */
abbr[data-en-ru]:hover .tooltip-box,
abbr[data-en-ru].active .tooltip-box {
    opacity: 1;
    visibility: visible;
    /* Move Y to 0. We DO NOT touch X here (JS handles it). */
    transform: translateY(0);
}
